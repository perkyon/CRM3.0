# üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ Git (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª—é—á–∞)

## –ë—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± - —É–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏

–ï—Å–ª–∏ —Ç—ã –Ω–µ —Ö–æ—á–µ—à—å –º–µ–Ω—è—Ç—å –∫–ª—é—á, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –∏–∑ Git –∏—Å—Ç–æ—Ä–∏–∏. –í–æ—Ç —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±:

### –®–∞–≥ 1: –ù–∞–π–¥–∏ —Å—Ç–∞—Ä—ã–π –∫–ª—é—á

GitHub –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ –∫–ª—é—á –±—ã–ª –≤ `SUPABASE_SETUP.md`. –î–∞–≤–∞–π –Ω–∞–π–¥–µ–º –µ–≥–æ:

```bash
# –ù–∞–π–¥–∏ –≤—Å–µ –∫–æ–º–º–∏—Ç—ã —Å —ç—Ç–∏–º —Ñ–∞–π–ª–æ–º
git log --all --full-history -- "*SUPABASE_SETUP.md"

# –ü–æ—Å–º–æ—Ç—Ä–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –≤ —Å—Ç–∞—Ä–æ–º –∫–æ–º–º–∏—Ç–µ
git show <commit-hash>:SUPABASE_SETUP.md | grep -i "service\|eyJ" -A 5 -B 5
```

### –®–∞–≥ 2: –£–¥–∞–ª–∏ –∫–ª—é—á –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—è git filter-repo

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ git-filter-repo (–µ—Å–ª–∏ –Ω–µ—Ç)
pip install git-filter-repo
# –∏–ª–∏
brew install git-filter-repo

# –°–æ–∑–¥–∞–π —Ñ–∞–π–ª —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º –¥–ª—è –∑–∞–º–µ–Ω—ã
# –ó–∞–º–µ–Ω–∏ <–¢–í–û–ô_–°–¢–ê–†–´–ô_–ö–õ–Æ–ß> –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á –∏–∑ GitHub –æ–ø–æ–≤–µ—â–µ–Ω–∏—è
echo '<–¢–í–û–ô_–°–¢–ê–†–´–ô_–ö–õ–Æ–ß>==>***REMOVED***' > secret-replace.txt

# –£–¥–∞–ª–∏ –∫–ª—é—á –∏–∑ –≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏
git filter-repo --replace-text secret-replace.txt --force

# –û—á–∏—Å—Ç–∏ –≤—Å–µ —Å—Å—ã–ª–∫–∏
git reflog expire --expire=now --all
git gc --prune=now --aggressive

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git push --force --all --tags
```

### –®–∞–≥ 3: –£–¥–∞–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```bash
rm secret-replace.txt
rm -rf .git/filter-repo  # –µ—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```

## ‚ö†Ô∏è –í–ê–ñ–ù–û:

1. **–°–æ–æ–±—â–∏ –∫–æ–º–∞–Ω–¥–µ** - –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º, –∏–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç:
   ```bash
   git fetch origin
   git reset --hard origin/main
   ```

2. **GitHub –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ** –º–æ–∂–µ—Ç –æ—Å—Ç–∞—Ç—å—Å—è, –Ω–æ –ø–æ—Å–ª–µ force push –∏—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω–∞

3. **–ü—Ä–æ–≤–µ—Ä—å** —á—Ç–æ –∫–ª—é—á —É–¥–∞–ª–µ–Ω:
   ```bash
   git log --all -S "—Ç–≤–æ–π_—Å—Ç–∞—Ä—ã–π_–∫–ª—é—á"
   ```
   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ.

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: BFG Repo-Cleaner (–µ—â–µ –ø—Ä–æ—â–µ)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏
brew install bfg

# –°–æ–∑–¥–∞–π —Ñ–∞–π–ª —Å –∫–ª—é—á–æ–º
echo '—Ç–≤–æ–π_—Å—Ç–∞—Ä—ã–π_–∫–ª—é—á' > keys.txt

# –û—á–∏—Å—Ç–∏ –∏—Å—Ç–æ—Ä–∏—é
bfg --replace-text keys.txt

# –û—á–∏—Å—Ç–∏ –∏ –æ—Ç–ø—Ä–∞–≤—å
git reflog expire --expire=now --all
git gc --prune=now --aggressive
git push --force --all
```

## –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è:

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ç—ã —É–¥–∞–ª–∏—à—å –∫–ª—é—á –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏:
1. –ó–∞–∫—Ä–æ–π –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –≤ GitHub –∫–∞–∫ "resolved"
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–ª—é—á –±–æ–ª—å—à–µ –Ω–µ –≤–∏–¥–µ–Ω: `git log -S "–∫–ª—é—á"`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –∫–ª—é—á —É–∂–µ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω (–∫—Ç–æ-—Ç–æ –º–æ–≥ –µ–≥–æ —É–≤–∏–¥–µ—Ç—å –∑–∞ 25 –¥–Ω–µ–π), –ª—É—á—à–µ –≤—Å—ë-—Ç–∞–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π. –ù–æ –µ—Å–ª–∏ —Ç—ã —É–≤–µ—Ä–µ–Ω —á—Ç–æ –Ω–∏–∫—Ç–æ –Ω–µ –≤–∏–¥–µ–ª - –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏.

